// TYPO main mixin, stable

@mixin typo($size: 1, $alias: null, $height: auto){

  // normalize unit
  $size: rem($size);

  // normalize line-height
  @if $height == 'auto' {
    $sub-lines: $typo-sub-lines or ceil($size);
    $rel-height: medium-value('line-height') / unit-strip($size);
    $height: $rel-height * ceil($typo-min-height / $rel-height * $sub-lines) / $sub-lines;
  }

  // get char height
  $char-height: map-get(font($alias), 'char-height') or 1;

  font-size: $size;
  line-height: $height;
  // margin-top: 0;
  // margin-bottom: 0;

  // allow content to be added and refer to current size and height
  $typo-curr-font: $alias !global;
  $typo-curr-font-size: $size !global;
  $typo-curr-line-height: $height !global;
  $typo-curr-char-height: $char-height !global;
  @at-root { @content; }
  // @content;
  $typo-curr-font: null !global;
  $typo-curr-font-size: null !global;
  $typo-curr-line-height: null !global;
  $typo-curr-char-height: null !global;
}

@mixin mod-typo($mod, $rest...) { @include typo(mod-size($mod), $rest...); }
