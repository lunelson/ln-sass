// TYPO SCOPE

@mixin typo-scope($size: 1, $alias: null, $line-height: null, $at-root: false){

  $size: rem($size); // assure size is in rem
  $font: font($alias); // get the font map
  $char-height: map-get($font, 'char-height') or 1;
  $line-height: $line-height or auto-line-height($size); // no line-height spec'd = 'auto'

  $typo-prev-font: $typo-curr-font;
  $typo-prev-font-size: $typo-curr-font-size;
  $typo-prev-line-height: $typo-curr-line-height;
  $typo-prev-char-height: $typo-curr-char-height;

  $typo-curr-font: $font !global;
  $typo-curr-font-size: $size !global;
  $typo-curr-line-height: $line-height !global;
  $typo-curr-char-height: $char-height !global;

  @if medium-orig-value('font-size') and $size != 1rem { font-size: $size; }
  @if medium-orig-value('line-height') { line-height: $line-height; }

  @if $at-root { @at-root { @content; } }
  @else { @content; }

  $typo-curr-font: $typo-prev-font !global;
  $typo-curr-font-size: $typo-prev-font-size !global;
  $typo-curr-line-height: $typo-prev-line-height !global;
  $typo-curr-char-height: $typo-prev-char-height !global;

}

// modular version
@mixin mod-typo-scope($mod: 0, $rest...){
  @include typo-scope(mod-size($mod), $rest...) { @content; }
}