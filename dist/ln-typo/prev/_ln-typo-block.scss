// TYPO BLOCK

@mixin typo-block($size: 1rem, $alias: null, $line-height: null, $suffix: null) {

  $size: rem($size); // assure size is in rem
  $font: font($alias); // get the font map
  $char-height: map-get($font, 'char-height') or 1;
  $line-height: $line-height or auto-line-height($size); // no line-height spec'd = 'auto'

  // output
  .typo#{if($suffix, '--#{$suffix}', '')} > & {

    $typo-prev-font: $typo-curr-font;
    $typo-prev-font-size: $typo-curr-font-size;
    $typo-prev-line-height: $typo-curr-line-height;
    $typo-prev-char-height: $typo-curr-char-height;

    $typo-curr-font: $font !global;
    $typo-curr-font-size: $size !global;
    $typo-curr-line-height: $line-height !global;
    $typo-curr-char-height: $char-height !global;

    @if medium-orig-value('font-size') and $size != 1rem { font-size: $size; }
    @if medium-orig-value('margin-y') { margin-top: t-margin(); }
    @if medium-orig-value('line-height') {
      line-height: $line-height;
      margin-bottom: t-margin(0);
      &:first-child { margin-top: t-margin(0); }
    }

    @content;

    $typo-curr-font: $typo-prev-font !global;
    $typo-curr-font-size: $typo-prev-font-size !global;
    $typo-curr-line-height: $typo-prev-line-height !global;
    $typo-curr-char-height: $typo-prev-char-height !global;
  }
}

// modular version
@mixin mod-typo-block($mod: 0, $rest...) {
  @include typo-block(mod-size($mod), $rest...) { @content; }
}
