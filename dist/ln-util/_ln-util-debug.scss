///////////
// DEBUG //
///////////

@mixin setup-debug($visible: true) {

  // DEFAULT UTILITY STYLES

  // heights
  @for $n from 1 to 10 {
    [debug~="height-#{$n * 100}"] {
    height: $n * 100px;
    }
  }

  // aspect ratios
  @each $aspect in (1 1, 2 1, 1 2, 16 9, 9 16, 3 2, 2 3, 4 3, 3 4) {
    $n: nth($aspect, 1); $d: nth($aspect, 2);
    [debug~="aspect-#{$n}-#{$d}"] {
      position: relative;
      &:before {
        display: block;
        content: '';
        width: 100%;
        padding-top: $d/$n * 100%;
        background-clip: padding-box;
      }
      & > * {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
    }
  }

  // colors
  [debug~="color-red"] { background-color: #F2CCBB; }
  [debug~="color-yellow"] { background-color: #F2F2B6; }
  [debug~="color-green"] { background-color: #B6F2B6; }
  [debug~="color-cyan"] { background-color: #B6F2F2; }
  [debug~="color-blue"] { background-color: #C2DAF2; }
  [debug~="color-magenta"] { background-color: #F2CEF2; }

  // CONDITIONALLY VISIBLE STYLES
  @if $visible {
    @if $debug-toggle {
      $column-count: get($reference-query, column-count);
      $margin-x: get($reference-query, margin-x);
      body::before { content: '#{$alias}'; }
      body::after {
        $row-width: $content-width + $margin-x;
        width: $row-width; margin-left: ($row-width + $margin-x)/-2;
        background: linear-gradient(to right,
          rgba(0, 0, 0, 0) $margin-x,
          $debug-color $margin-x,
          $debug-color $row-width / $column-count - $margin-x
        );
        background-size: $row-width / $column-count;
      }
    }

    // // output stuff for the debug
    // @if $debug-toggle {
      body {
        &:before, &:after {
          position: fixed;
          pointer-events: none;
          user-select: none;
          z-index: 999;
        }
        &:before {
          text-align: right;
          padding: 0.25rem;
          width: 100%;
          display: block;
          color: black;
          bottom: 0;
          background-color: $debug-color;
        }
        &:after {
          content: '';
          top: 0;
          bottom: 0;
          left: 50%;
        }
      }
    // }
  }
}
