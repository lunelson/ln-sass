// CALC functions

@function calc-pre($value){
  @if type-of($value) == 'string' {
    $is-calc: str-index($value, 'calc') == 1;
    $start: str-index($value, '(');
    $end: str-last-index($value, ')');
    @if $is-calc and $start and $end {
      @return unquote(str-slice($value, $start, $end));
    } @else {
      @return unquote('(#{$value})');
    }
  } @else {
    @return unquote('#{$value}');
  }
}

// re-calc... ?
@function re-calc($calc1, $calc2, $op: '+'){
  @return unquote('calc(#{calc-pre($calc1)} #{$op} #{calc-pre($calc2)})');
}

// add/sub -- both args can be calc()
@function calc-add($calc1, $calc2){ @return unquote('calc(#{calc-pre($calc1)} + #{calc-pre($calc2)})'); }
@function calc-sub($calc1, $calc2){ @return unquote('calc(#{calc-pre($calc1)} - #{calc-pre($calc2)})'); }

// mul/div -- second arg must be number
@function calc-mul($calc, $n){ @return unquote('calc(#{calc-pre($calc)} * #{$n})'); }
@function calc-div($calc, $n){ @return unquote('calc(#{calc-pre($calc)} / #{$n})'); }