/////////////
// Z-INDEX //
/////////////

$z-indexes: (
  baked: 30,
  stoned: 20,
  buzzed: 10,
  sober: 0,
  asleep: -10
) !default;

@function z-index($name) { @return map-get($z-indexes, $name); }
@function z($name) { @return z-index($name); }

/////////////////
// POSITIONING //
/////////////////

@mixin position($pos, $args...) {
  position: $pos;
  @each $arg in $args { #{nth($arg, 1)}: nth($arg, 2); }
}

@mixin absolute($args...) { @include position(absolute, $args...); }
@mixin fixed($args...) { @include position(fixed, $args...); }
@mixin relative($args...) { @include position(relative, $args...); }

@mixin clearfix {
  &:after {
    content:"";
    display:table;
    clear:both;
  }
}
@mixin clearfix-legacy(){
  & { *zoom: 1; }
  &:before, &:after { content: ""; display: table; }
  &:after { clear: both; }
}


////////////////
// SUB-LAYOUT //
////////////////


@mixin child-layout($selectors, $type, $options...) {

  // contain and cover sizing
  @if index(contain cover, $type) {
    position: relative;
    @if $type == 'cover' { overflow: hidden; }
    #{children($selectors)} {
      position: absolute;
      top: 50%; left: 50%;
      width: auto; height: auto;
      transform: translate(-50%, -50%);
      @if $type == 'contain' {
        min-width: none; max-width: 100%;
        min-height: none; max-height: 100%;
      }
      @if $type == 'cover' {
        min-width: 100%; max-width: none;
        min-height: 100%; max-height: none;
      }
    }
  }

  // table
  @if index(table table-cell table-row cell row, $type) {
    width: 100%; // force auto size of children
    display: table;
    table-layout: fixed;
    border-collapse: collapse;
    #{children($selectors)} {
      @if index(table-row row, $type) {
        display: table-row;
        height: auto; // base setting
        @if index($options, left) { text-align: left; }
        @else if index($options, right) { text-align: right;}
        @else { text-align: center; }
      }
      @else {
        display: table-cell;
        width: auto; // base setting
        @if index($options, bottom) { vertical-align: bottom; }
        @else if index($options, top) { vertical-align: top;}
        @else { vertical-align: middle; }
      }
      overflow: hidden;
      @content;
    }
  }

  // inline-block
  @else if index(inline-block iblock ib, $type) {
    font-size: 0rem;
    &:before, &:after, #{children($selectors)} {
      display: inline-block;
      @if index($options, bottom) { vertical-align: bottom; }
      @else if index($options, middle) { vertical-align: middle;}
      @else { vertical-align: top; }
    }
    @if index($options, justify) {
      text-align: justify;
      &:after { content: ''; width: 100%; }
    }
    @else {
      @if index($options, right) { text-align: right;}
      @else if index($options, center) or index($options, centre) { text-align: center; }
      @else { text-align: left; }
      &:before { content: ''; height: 100%; }
    }
    #{children($selectors)} { font-size: 1rem; max-width: 100%; @content; }
  }
}

// alias
@mixin sub-layout($args...) { @include child-layout($args...) { @content; } }